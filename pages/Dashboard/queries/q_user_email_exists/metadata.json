{
  "gitSyncId": "68f1ea66301c3b6f3e13c5f4_51153ab1-8c91-4d6e-88ee-d62191803d20",
  "id": "Dashboard_q_user_email_exists",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "WITH v AS (\n  SELECT\n    {{ appsmith.store.businessId }}::uuid                                    AS bid,\n    NULLIF(lower(trim({{ this.params.email || '' }}::text)), '')             AS email_norm,\n    NULLIF(trim({{ this.params.exclude_user_id || '' }}::text), '')::uuid    AS exclude_uid\n),\nchk AS (\n  SELECT\n    email_norm IS NOT NULL\n    AND email_norm ~ '^[^@\\\\s]+@[^@\\\\s]+\\\\.[^@\\\\s]+$' AS ok_email\n  FROM v\n),\ndup AS (\n  SELECT\n    u.id, u.email, u.role, u.\"businessId\"\n  FROM \"User\" u, v\n  WHERE (SELECT ok_email FROM chk)\n    AND lower(u.email) = (SELECT email_norm FROM v)\n    AND u.\"businessId\" = (SELECT bid FROM v)\n    AND ( (SELECT exclude_uid FROM v) IS NULL OR u.id <> (SELECT exclude_uid FROM v) )\n  LIMIT 1\n)\nSELECT\n  (SELECT ok_email FROM chk)                 AS ok_email,\n  EXISTS(SELECT 1 FROM dup)                  AS exists_in_business,\n  (SELECT to_jsonb(dup.*) FROM dup)          AS row;\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "AxiomaDB",
      "isAutoGenerated": false,
      "name": "AxiomaDB",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "q_user_email_exists",
    "pageId": "Dashboard",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}