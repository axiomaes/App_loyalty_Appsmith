{
  "gitSyncId": "68f1ea66301c3b6f3e13c5f4_9c2a654e-68cf-47d7-8d70-e156e4015eda",
  "id": "Dashboard_q_pagos_listado",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "-- q_pagos_listado (robusto ante fechas vacÃ­as)\n\nWITH v AS (\n  SELECT\n    {{ appsmith.store.businessId }}::uuid AS bid,\n    NULLIF({{ this.params.startDate || '' }}, '')::date AS d1,\n    NULLIF({{ this.params.endDate   || '' }}, '')::date AS d2\n)\nSELECT\n  bp.id                              AS payment_id,\n  c.id                               AS customer_id,\n  c.name                             AS customer_name,\n  bp2.name                           AS plan_name,\n  b.id                               AS bond_id,\n  bp.period                          AS period,\n  bp.method                          AS method,\n  bp.notes                           AS notes,\n  bp.\"amountCents\"::int              AS amount_cents,\n  ROUND(bp.\"amountCents\"/100.0, 2)   AS amount_eur,\n  bp.\"paidAt\"                        AS paid_at,\n  to_char(bp.\"paidAt\",'YYYY-MM-DD')  AS paid_date,\n  to_char(bp.\"paidAt\",'HH24:MI')     AS paid_time\nFROM \"BondPayment\" bp\nJOIN \"Bond\"      b   ON b.id = bp.\"bondId\"\nJOIN \"Customer\"  c   ON c.id = b.\"customerId\"\nJOIN \"BondPlan\"  bp2 ON bp2.id = b.\"planId\"\nJOIN v ON TRUE\nWHERE\n  c.\"businessId\" = v.bid\n  AND c.\"deletedAt\" IS NULL\n  AND bp2.\"businessId\" = v.bid\n  AND (v.d1 IS NULL OR bp.\"paidAt\"::date >= v.d1)\n  AND (v.d2 IS NULL OR bp.\"paidAt\"::date <= v.d2)\nORDER BY bp.\"paidAt\" DESC;\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "AxiomaDB",
      "isAutoGenerated": false,
      "name": "AxiomaDB",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "q_pagos_listado",
    "pageId": "Dashboard",
    "runBehaviour": "AUTOMATIC",
    "userSetOnLoad": false
  }
}